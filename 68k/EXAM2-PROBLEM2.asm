
    ORG    $8000
START:                  ; first instruction of program


DRIVER
    CLR.L   D0
    CLR.L   D1
    CLR.L   D2
    CLR.L   D3
    CLR.L   D4
    CLR.L   D5
    LEA     ARRAY,A0    ;LOADING ARRAY TO A0
    MOVE.W  #4,D7       ; THIS IS TO ACCOUNT FOR OUR LONG NUMBERS. USED LATER FOR MULT. 
    MOVE.W  #1,D0
    
    MOVE.W  #8,D1
    MOVE.W  #10,D2
    MOVE.W  #3,D4
    MOVE.W  #2,D3
    ;BSR     READWRITEARRAYELEMENT
    JMP     $8100    
    ORG     $8100
READWRITEARRAYELEMENT
    
    ; WE RECALL THAT WE WILL BE USING ROW-MAJOR ORDER. 
    ; IN ADDITION, WE RECALL THAT EA= BASE+COLUMNOFFSET+ROWOFFSET;
    MOVE.W  D4,D6       ;D6 WILL BE OUR EA. FIRST OPERATION IS TO MOVE ROW THERE.
    MULU.W  D1,D6       ; POSITION_ROW*COLUM#
    ADD.L   D3,D6       ; POSITION_ROW*COLUMN#+POSITION_COLUMN
    MULU.W  D7,D6       ; ARRAY TRAVERSED CORRECTLY ACCOUNTING FOR THE LONG NUMBERS IN THE ARRAY
    ADDA.L  D6,A0
    ;NOW, DECIDE WHETHER WE ARE READING OR WRITING. 
    CMPI.B  #0,D0
    BEQ     READ
    CMPI.B  #1,D0
    BEQ     WRITE
    ;OTHERWISE WE WILL END THE PROGRAM, SINCE WE DID NOT GET A GOOD FLAG. 
    BSR     ENDPROGRAM
    
READ
    MOVE.L  (A0),D5     ;COPYING D5 TO A0. BASIC READ OPERATION FROM MEMORY
    BSR     ENDPROGRAM  ;END THE PROGRAM AFTER

WRITE
    MOVE.L  #$55555555,(A0)   ;NUMBER TO WRITE AT A0
    MOVE.L  (A0),D5     ;WRITING THE CONTENTS OF D5 TO A0
    BSR     ENDPROGRAM  ; ENDING THE PROGRAM 


ARRAY
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   
    DC.L    $1000,$1001,$1002,$1003,$1004,$1005,$1006,$1007   

ENDPROGRAM
    SIMHALT
    END    START        ; last line of source
